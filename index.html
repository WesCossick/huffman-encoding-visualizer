<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	<title>Huffman Encoding Visualizer</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	
	<!-- stylesheets -->
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/styles.css" rel="stylesheet">
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
</head>

<body>
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				
				<a class="navbar-brand" href="index.html">Huffman Encoding Visualizer</a>
			</div>
				
			<div class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li class="active"><a href="index.html">Home</a></li>
					<li><a href="about.html">About</a></li>
				</ul>
			</div><!--/.nav-collapse -->
		</div>
	</div>

	<div class="container">
		<div class="text-center">
			<h1>Huffman Encoding Visualizer</h1>
			
			<p class="lead">
				<div class="row">
					<div class="col-xs-12" style="padding:0 0 20px 0;">
						<a type="button" class="btn btn-primary" id="huffman_download"><i class="fa fa-arrow-down"></i>&nbsp; Download</a>
					</div>
				</div>
				
				<div class="row">
					<div class="col-xs-6">
						<textarea id="huffman_input" style="width:100%; height:500px;" placeholder="Start typing..."></textarea>
					</div>
					
					<div class="col-xs-6">
						<div id="huffman_graph" style="background:#eee; border:2px solid #ddd; height:500px;">
							<i style="line-height:500px;">Type to see graph...</i>
						</div>
					</div>
				</div>
				
				<div class="row">
					<div class="col-xs-12">
						<div id="huffman_bits" style="margin-top:20px; padding:20px 0; background:#eee; border:2px solid #ddd;">
							<i>Type to see bits...</i>
						</div>
					</div>
				</div>
			</p>
		</div>
	</div><!-- /.container -->

	<!-- libraries -->
	<script src="js/libraries/jquery-2.1.3.min.js"></script>
	<script src="js/libraries/bootstrap.min.js"></script>
	<script src="js/libraries/jit.js"></script>
	<script src="js/libraries/binary_tree_visualizer.js"></script>
	<script src="js/libraries/priority-queue.js"></script>
	
	<!-- huffman scripts -->
	<script src="js/huffman/build_tree.js"></script>
	<script src="js/huffman/build_path.js"></script>
	<script src="js/huffman/encode_string.js"></script>
	
	<!-- gui scripts -->
	<script src="js/gui/index.js"></script>
	
	<script>
	$(document).ready(function(){
		var randomData = [];
		
		var bytes = new Uint8Array(4);
		for(i = 0; i < 4; i++) {
			bytes[i] = 65+i;
		}
		randomData.push(bytes);
		
		var blob = new Blob(randomData, {type: "application/octet-stream"});
		var url = window.URL.createObjectURL(blob);
		$("#huffman_download").attr("href", url);
		$("#huffman_download").attr("download", "Coool file");
		//window.URL.revokeObjectURL(url);
	});
	
	
	var target = document.getElementById("huffman_input");
	target.addEventListener("dragover", function(e){e.preventDefault();}, true);
	target.addEventListener("drop", function(e){
		e.preventDefault();
		load_file(e.dataTransfer.files[0]);
	}, true);
	
	function load_file(src){
		var reader = new FileReader();
		reader.onload = function(e){
			console.log(e.target.result);
			
			markup = [];
			for (n = 0; n < e.target.result.length; ++n) {
				aByte = e.target.result.charCodeAt(n);
				byteStr = aByte.toString(16);
				if (byteStr.length < 2) {
					byteStr = "0" + byteStr;
				}
				markup.push(byteStr);
			}
			console.log(markup.join(" "));
		};
		reader.readAsBinaryString(src);
	}
	</script>
</body>
</html>